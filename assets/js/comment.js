var addComment=function(){function showModal(e,t,n){I("modal").classList.remove("hidden"),document.getElementById("modal-title").textContent=e,document.getElementById("modal-message").textContent=t,select("#close").addEventListener("click",function(){I("modal").classList.add("hidden"),submitButton.innerHTML="Submit",submitButton.classList.remove("disabled"),submitButton.disabled=!1,n&&(form.reset(),form.doReset())})}var select=function(e){return document.querySelector(e)},I=function(e){return document.getElementById(e)},submitButton=select(".submit-form"),form=select(".form");return form.doReset=function(){submitButton.innerHTML="Submit",this.classList.remove("disabled"),this.disabled=!1},form.addEventListener("submit",function(event){event.preventDefault();var errorHandler=function(e,t){console.log(t),showModal(e,"An error occured.\n\n["+(t.errorCode||"unknown")+"]",!1)},captchaString=I("captcha-label").innerHTML.toString().replaceAll(" ","").slice(0,5),ans=eval(captchaString),userAns=I("commentbox-captcha").value;if(ans!=userAns)return errorHandler("Wrong Captcha!",{errorCode:"CAPTCHA_INCORRECT"}),generateCaptcha(),void(I("commentbox-captcha").value="");submitButton.innerHTML="Posting...",submitButton.classList.add("disabled"),submitButton.disabled=!0,fetch(this.getAttribute("action"),{method:"POST",body:new URLSearchParams(new FormData(this)),headers:new Headers({"content-type":"application/x-www-form-urlencoded"})}).then(function(e){e.ok?showModal("Comment submitted!","Thanks for your comment! It will be published after it's been approved by the Genics Blog team :)",!0):e.json().then(function(e){errorHandler("Server Error",e),generateCaptcha()})})["catch"](function(e){console.error(e),errorHandler("Unexpected Error",e)})}),{moveForm:function(e,t,n){var r=this,o=I(e),i=I(t),a=I("cancel-reply-btn"),s=I("replying-to-id");if(o&&i&&a&&s){if(r.respondId=t,!I("sm-temp-form-div")){var d=document.createElement("div");d.id="sm-temp-form-div",d.style.display="none",i.parentNode.insertBefore(d,i)}return o.parentNode.insertBefore(i,o.nextSibling),s.value=n,I("form-parent").classList.add("ml-14"),I("form-title").innerHTML="Add a reply",a.classList.remove("hidden"),a.onclick=function(){var e=I("sm-temp-form-div"),t=I(r.respondId);if(e&&t)return I("form-parent").classList.remove("ml-14"),I("form-title").innerHTML="Add a comment",I("replying-to-id").value=null,e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e),this.classList.add("hidden"),this.onclick=null,!1},I("commentbox-name").focus(),!1}}}}();