<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content="The complete guide to integrating auth0 authentication in your Android app."> <meta name="twitter:description" content="The complete guide to integrating auth0 authentication in your Android app."> <meta property="og:description" content="The complete guide to integrating auth0 authentication in your Android app."> <meta property="og:type" content="article"> <meta property="og:title" content="Integrate Authentication to your Android App with Auth0"> <meta property="og:image" content="https://cdn.hashnode.com/res/hashnode/image/upload/v1632651818188/OlwaCV_aL.png"> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@genicsblog"> <meta name="twitter:image" content="https://cdn.hashnode.com/res/hashnode/image/upload/v1632651818188/OlwaCV_aL.png"> <meta name="twitter:creator" content="@gourav_khunger"> <meta property="og:type" content="article"> <meta property="og:url" content="https://genicsblog.com/authentication-in-android-app-with-auth0"> <link rel="canonical" href="https://genicsblog.com/authentication-in-android-app-with-auth0"> <link rel="icon" href="/assets/images/genicsblog.png" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/theme.css"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Fira+Code&amp;family=Sen&amp;display=swap" rel="stylesheet"> <link rel="stylesheet" href="/assets/css/prism.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-145769474-1"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-145769474-1");</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8114751086331659" crossorigin="anonymous"></script> <title>Integrate Authentication to your Android App with Auth0</title> </head> <body> <nav> <p class="bg-primary p-3 text-center text-white font-medium flex flex-col sm:block"> <span class="md:hidden px-1">Connect with us on discord to stay updated.</span> <span class="hidden md:inline px-1">Connect with us on discord to stay updated on the blog's development.</span> <a href="https://discord.genicsblog.com" target="_blank" class="font-bold underline header-anchor hover:text-slate-300" rel="nofollow noopener noreferrer"> Join &gt; </a> </p> <header class="w-screen top-0 z-10" id="navbar"> <div class="bg-background max-h-20 py-1 px-2 sm:px-8 lg:px-8 mx-auto"> <div class="flex justify-between h-16"> <div class="flex px-2 lg:px-0"> <a class="group flex-shrink-0 flex items-center logo-anchor" href="/" aria-label="Home Page Link"> <div class="flex items-center space-x-2 whitespace-nowrap flex-nowrap"> <div class="h-8 w-8 mx-2"> <svg class="h-8 w-8 fill-white group-hover:fill-slate-300" viewbox="0 0 79.784508 91.197495" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <g id="layer1" transform="translate(-68.235445,-52.679805)"> <path id="path962" style="stroke:none;stroke-width:0.999999px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 408.73047,210.44336 -139.49414,80.59961 0.87109,162.49414 52.71289,-32.94922 85.34766,48.85938 87.42773,-48.85743 -0.63476,-53.22851 -84.8711,-0.88477 v 27.79297 h 56.02735 v 9.45508 l -58.31446,33.66797 -56.13085,-32.4082 0.63476,-66.94922 55.81836,-32.22461 57.25195,32.76172 82.41016,-47.75782 z m 0.43945,32.62695 83.28125,48.08203 -26.93555,15.55274 -57.21484,-33.0332 -84.18359,48.60351 v 66.39453 l -25.48047,14.71094 0.084,-96.54102 z" transform="scale(0.26458333)"></path> <path style="stroke:none;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 81.889144,125.74786 26.204966,15.12944 36.92584,-21.31914 V 88.998204 l -7.22758,4.172845 V 115.03627 L 108.1902,132.12709 89.310794,121.22706 Z" id="path1416"></path> </g> </svg> </div> <span class="font-bold hidden sm:block text-xl tracking-tight text-white group-hover:text-slate-300"> Genics Blog</span> </div> </a> </div> <div class="flex items-center h-16"> <div class="hidden lg:block pr-4"> <a class="nav-item text-white" href="/topics">Topics</a> <a class="nav-item text-white" href="/about">About Us</a> <a class="nav-item text-white" href="/contact">Contact</a> <a class="nav-item text-white" href="/advertise">Advertise</a> <a class="nav-item text-white" target="_blank" href="https://docs.genicsblog.com">Docs</a> </div> <button onclick="showSearch()" aria-label="Search for posts"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-white hover:stroke-slate-300" fill="none" viewbox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> </button> <a class="ml-4 px-2.5 py-1.5 font-bold rounded-md text-black bg-white hover:bg-slate-300 hover:scale-110 transition underline-none" href="/contribute">Contribute</a> <div class="ml-4 lg:hidden cursor-pointer"> <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 stroke-white hover:stroke-slate-300" id="menu-open" viewbox="0 0 24 24" onclick="toggleNav()"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path> </svg> <svg xmlns="http://www.w3.org/2000/svg" class="menu-close h-8 w-8 hidden stroke-white hover:stroke-slate-300" id="menu-close" viewbox="0 0 24 24" onclick="toggleNav()"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path> </svg> </div> </div> </div> </div> <div class="top-0 bg-background hidden p-6 lg:hidden" id="mobile-nav"> <div class="grid grid-cols-2 gap-y-2 gap-x-4"> <a class="group mobile-nav-item " href="/topics"> <span class="group-hover:text-white">Topics</span> </a> <a class="group mobile-nav-item " href="/advertise"> <span class="group-hover:text-white">Advertise</span> </a> <a class="group mobile-nav-item " href="/about"> <span class="group-hover:text-white">About Us</span> </a> <a class="group mobile-nav-item " href="/contact"> <span class="group-hover:text-white">Contact</span> </a> <a class="group mobile-nav-item" href="https://docs.genicsblog.com" target="_blank"> <span class="group-hover:text-white">Documentation</span> </a> </div> </div> </header> </nav> <header class="bg-background text-white p-6 sm:p-10" id="banner"> <div class="flex flex-col lg:flex-row p-2"> <div class="flex justify-center items-center lg:w-1/2 md:mb-0"> <img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632651818188/OlwaCV_aL.png" class="w-full md:w-3/4 lg:w-full rounded-xl shadow-xl aspect-video m-8" loading="lazy"> </div> <div class="flex flex-col justify-center lg:items-start w-full lg:w-1/2 lg:ml-12"> <h1 class="text-4xl font-black tracking-tight">Integrate Authentication to your Android App with Auth0</h1> <span class="mt-0.5 text-justify">The complete guide to integrating auth0 authentication in your Android app.</span> <div class="flex items-center mt-8"> <img class="rounded-full w-14 h-14" src="https://avatars.githubusercontent.com/u/46792249" loading="lazy"> <div class="ml-4 leading-3"> <a class="font-extrabold text-xl" href="/contributor/gouravkhunger"> Gourav Khunger </a><br> <span class="text-sm"> Posted on September 26, 2021 </span> </div> </div> <div class="mt-8"> <span>Category: </span> <a class="text-sm ml-2 hover:scale-110 category-name !bg-android underline-none" href="/category/android">#android</a> </div> <div class="mt-4 sm:mt-1"> <span>Tags: </span> <a class="text-sm ml-2 my-0.5 hover:scale-110 tag-name !bg-auth0 underline-none" href="/tag/auth0">#auth0</a> <a class="text-sm ml-2 my-0.5 hover:scale-110 tag-name !bg-authentication underline-none" href="/tag/authentication">#authentication</a> <a class="text-sm ml-2 my-0.5 hover:scale-110 tag-name !bg-app-development underline-none" href="/tag/app-development">#app-development</a> </div> </div> </div> </header> <main> <section class="lg:flex"> <div class="bg-white rounded-2xl shadow-xl shadow-slate-200 md:text-lg m-6 md:m-10 lg:m-14 lg:w-full lg:max-w-[65%] xl:max-w-[70%]"> <article class="p-6 md:p-8"> <p><a href="https://auth0.com" rel="nofollow noopener noreferrer" target="_blank">Auth0</a> is an amazing tool to easily integrate user authentication in any kind of app you are building. It has a great set of tools to enable auth in your app in a few really quick steps.</p> <p>Today, we are going to look into how to integrate Auth0 into your Android App! First, we’ll set up the local project for integrating Auth0, and then we’ll set up the app on the Auth0 dashboard.</p> <p>Check out this video to learn what we are going to build in this tutorial:</p> <div class="mb-6 aspect-video"> <iframe src="https://www.youtube.com/embed/obk3q1AaH6I" class="w-full h-full rounded-xl" allowfullscreen="" loading="lazy"> </iframe> </div> <p>The code for this basic app that we are going to build is present <a href="https://github.com/gouravkhunger/auth0-demo-android" rel="nofollow noopener noreferrer" target="_blank">here on GitHub</a>, star it and follow me :)</p> <h1 id="android-app-setup">Android app setup</h1> <h2 id="initialize-the-project">Initialize the project</h2> <p>First, create a new Android Studio Project. If you are just checking out Auth0, you can follow the steps mentioned in <a href="https://genicsblog.com/how-to-create-your-first-android-app-using-android-studio" target="_blank">my previous article</a> on how to make a basic project using Android Studio:</p> <p>You can also use any existing project!</p> <h2 id="set-up-view-binding">Set up view binding</h2> <h3 id="what-is-it">What is it?</h3> <p>View binding is a new way of referencing views from XML layouts inside your java/kotlin classes. View Binding creates a Binding class for each XML layout resource which you can use to refer views without the hassle of using <code class="language-plaintext highlighter-rouge">findViewById()</code> or using the deprecated kotlin synthetics.</p> <h3 id="enable-view-binding">Enable View Binding</h3> <p>If you are reading this post in the future, chances are that view binding is supported right into new projects using Android Studio.</p> <p>If not, you can go into the App level <code class="language-plaintext highlighter-rouge">build.gradle</code> file and add this piece of code anywhere inside the <code class="language-plaintext highlighter-rouge">android</code> scope.</p> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">buildFeatures</span> <span class="o">{</span>
    <span class="n">viewBinding</span> <span class="kc">true</span>
<span class="o">}</span>
</code></pre></div></div> <p>This image will give you a gist of where to add it:</p> <p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632594546418/IWp7Zd5Ju.png" alt="Enable view binding in Android apps" loading="lazy"></p> <h2 id="integrate-auth0">Integrate Auth0</h2> <p>To integrate Auth0 into our project, we need to do the following things.</p> <h3 id="add-auth0-dependencies">Add Auth0 dependencies</h3> <p>In your app level <code class="language-plaintext highlighter-rouge">build.gradle</code> dependencies section, add the following:</p> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dependencies</span> <span class="o">{</span>
  <span class="c1">// ... other dependencies</span>

  <span class="c1">// Auth0 Android SDK</span>
  <span class="n">implementation</span> <span class="s1">'com.auth0.android:auth0:2.4.0'</span>
<span class="o">}</span>
</code></pre></div></div> <p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632596987895/ChRu2ueYY.png" alt="Adding auth0 sdk to android app" loading="lazy"></p> <h3 id="add-manifest-placeholders">Add manifest placeholders</h3> <p>You need to add one more simple line of code to the app level <code class="language-plaintext highlighter-rouge">build.gradle</code> file:</p> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">android</span> <span class="o">{</span>
    <span class="n">defaultConfig</span> <span class="o">{</span>

        <span class="c1">// ...</span>

        <span class="c1">// Add this</span>
        <span class="n">manifestPlaceholders</span> <span class="o">=</span> <span class="o">[</span><span class="nl">auth0Domain:</span> <span class="s2">"@string/com_auth0_domain"</span><span class="o">,</span> <span class="nl">auth0Scheme:</span> <span class="s2">"demo"</span><span class="o">]</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>This creates an <code class="language-plaintext highlighter-rouge">intent-filter</code> which is used by the library to open your app back once the login is done by the user. If this is not done you have to define an <code class="language-plaintext highlighter-rouge">intent-filter</code> on your own. This method is easier than handling that.</p> <p><em>The <code class="language-plaintext highlighter-rouge">@string/com_auth0_domain</code> is actually a string resource, you need to declare it in your <code class="language-plaintext highlighter-rouge">strings.xml</code> as follows:</em></p> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"com_auth0_domain"</span><span class="nt">&gt;</span>Your domain here<span class="nt">&lt;/string&gt;</span>
</code></pre></div></div> <p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632597709645/Q0e7v73bC.png" alt="strings.xml file in android" loading="lazy"></p> <p>Don’t worry if you don’t have a domain like this yet, scroll below to find the auth0 dashboard setup, or you can skip this for now and come back to it later!</p> <p><strong>Press Sync Now on the notification bar to complete the finalize the above things</strong>.</p> <p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632597868902/ZQFHTYOs_.png" alt="Android Studio Gradle sync notification" loading="lazy"></p> <h3 id="add-internet-permissions-to-manifest">Add Internet Permissions to Manifest</h3> <p>You would need to add the internet permission to the <code class="language-plaintext highlighter-rouge">AndroidManifest.xml</code> file to allow network access, else the app may crash during login process.</p> <p>Add this line in your <code class="language-plaintext highlighter-rouge">AndroidManifest.xml</code> file as shown in the image below:</p> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.INTERNET"</span> <span class="nt">/&gt;</span>
</code></pre></div></div> <p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632598305357/oBXJKdYTY.png" alt="Adding internet permission in AndroidManifest.xml file" loading="lazy"></p> <h2 id="make-a-basic-ui">Make a basic UI</h2> <p>Open the <code class="language-plaintext highlighter-rouge">res/layout/activity_main.xml</code> file and replace the content with this layout:</p> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">android:orientation=</span><span class="s">"vertical"</span>
    <span class="na">android:gravity=</span><span class="s">"center"</span>
    <span class="na">tools:context=</span><span class="s">".MainActivity"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">"@+id/nameTv"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_margin=</span><span class="s">"10dp"</span>
        <span class="na">android:textSize=</span><span class="s">"30sp"</span>
        <span class="na">android:textColor=</span><span class="s">"#000000"</span>
        <span class="na">android:text=</span><span class="s">"@string/john_doe"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">"@+id/emailTv"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_marginBottom=</span><span class="s">"28dp"</span>
        <span class="na">android:textSize=</span><span class="s">"18sp"</span>
        <span class="na">android:text=</span><span class="s">"@string/email"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;Button</span>
        <span class="na">android:text=</span><span class="s">"@string/login"</span>
        <span class="na">android:id=</span><span class="s">"@+id/loginBtn"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_marginTop=</span><span class="s">"20dp"</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;Button</span>
        <span class="na">android:text=</span><span class="s">"@string/logout"</span>
        <span class="na">android:id=</span><span class="s">"@+id/logoutBtn"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_marginTop=</span><span class="s">"10dp"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre></div></div> <p>This will create a simple layout that has the name and email text on top and two buttons to log-in and log-out. You’ll have to create string resources for dummy name and email placeholder.</p> <p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632600993177/-UK3Y3RsZ.png" alt="Basic user profile layout preview for demo Android app" loading="lazy"></p> <h2 id="coding-the-mainactivity">Coding the <code class="language-plaintext highlighter-rouge">MainActivity</code> </h2> <h3 id="initialize-view-binding">Initialize View Binding</h3> <p>Create a <code class="language-plaintext highlighter-rouge">lateinit var</code> for the view binding:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">binding</span><span class="p">:</span> <span class="nc">ActivityMainBinding</span>
</code></pre></div></div> <p>Inflate the binding the the <code class="language-plaintext highlighter-rouge">onCreate()</code> method:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">binding</span> <span class="p">=</span> <span class="nc">ActivityMainBinding</span><span class="p">.</span><span class="nf">inflate</span><span class="p">(</span><span class="n">layoutInflater</span><span class="p">)</span>
</code></pre></div></div> <p>Finally, set the root element of the binding as the content view:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">setContentView</span><span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">root</span><span class="p">)</span>
</code></pre></div></div> <p>Here’s what the <code class="language-plaintext highlighter-rouge">MainActivity.kt</code> file looks like after doing the above changes:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// package name</span>
<span class="k">package</span> <span class="nn">com.github.gouravkhunger.auth0demo</span>

<span class="c1">// imports</span>
<span class="k">import</span> <span class="nn">...</span>

<span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>

    <span class="k">private</span> <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">binding</span><span class="p">:</span> <span class="nc">ActivityMainBinding</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>

        <span class="n">binding</span> <span class="p">=</span> <span class="nc">ActivityMainBinding</span><span class="p">.</span><span class="nf">inflate</span><span class="p">(</span><span class="n">layoutInflater</span><span class="p">)</span>
        <span class="nf">setContentView</span><span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">root</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="initialize-auth0">Initialize Auth0</h3> <p>First, you’ll need to create an instance of the Auth0 class.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Imports</span>
<span class="k">import</span> <span class="nn">...</span>

<span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">// other vars ...</span>
    <span class="k">private</span> <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">account</span><span class="p">:</span> <span class="nc">Auth0</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>

        <span class="c1">// ...</span>

        <span class="c1">// Set up the account object with the Auth0 application details</span>
        <span class="n">account</span> <span class="p">=</span> <span class="nc">Auth0</span><span class="p">(</span>
            <span class="s">"xljNBT32DCsVDN7sYDM1qEHMD2mA1fVp"</span><span class="p">,</span>
            <span class="s">"auth0-demo-android.us.auth0.com"</span>
        <span class="p">)</span>

        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p><em>This is the client id and domain of my sample app, replace it with yours to make it work.</em> To get these parameters for your app, skip ahead to the setting up auth0 section.</p> <h3 id="add-log-in">Add Log-in</h3> <p>Now, proceed to set the <code class="language-plaintext highlighter-rouge">onClickListener</code> on the button. This will be triggered whenever the button will be clicked.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>

        <span class="n">binding</span><span class="p">.</span><span class="n">loginBtn</span><span class="p">.</span><span class="nf">setOnClickListener</span> <span class="p">{</span>
            <span class="nc">WebAuthProvider</span><span class="p">.</span><span class="nf">login</span><span class="p">(</span><span class="n">account</span><span class="p">)</span>
                <span class="p">.</span><span class="nf">withScheme</span><span class="p">(</span><span class="s">"demo"</span><span class="p">)</span>
                <span class="p">.</span><span class="nf">withScope</span><span class="p">(</span><span class="s">"openid profile email"</span><span class="p">)</span>
                <span class="c1">// Launch the authentication passing the callback where the results will be received</span>
                <span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">object</span> <span class="err">: </span><span class="nc">Callback</span><span class="p">&lt;</span><span class="nc">Credentials</span><span class="p">,</span> <span class="nc">AuthenticationException</span><span class="p">&gt;</span> <span class="p">{</span>
                    <span class="c1">// Called when there is an authentication failure</span>
                    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onFailure</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="nc">AuthenticationException</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">// Something went wrong!</span>
                        <span class="nc">Toast</span>
                            <span class="p">.</span><span class="nf">makeText</span><span class="p">(</span><span class="k">this</span><span class="nd">@MainActivity</span><span class="p">,</span> <span class="s">"Login Error: \n${error.message}"</span><span class="p">,</span> <span class="nc">Toast</span><span class="p">.</span><span class="nc">LENGTH_LONG</span><span class="p">)</span>
                            <span class="p">.</span><span class="nf">show</span><span class="p">()</span>
                    <span class="p">}</span>

                    <span class="c1">// Called when authentication completed successfully</span>
                    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onSuccess</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="nc">Credentials</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">// Get the access token from the credentials object.</span>
                        <span class="c1">// This can be used to call APIs</span>
                        <span class="kd">val</span> <span class="py">accessToken</span> <span class="p">=</span> <span class="n">result</span><span class="p">.</span><span class="n">accessToken</span>
                        <span class="nf">showUserProfile</span><span class="p">(</span><span class="n">accessToken</span><span class="p">)</span>
                    <span class="p">}</span>
                <span class="p">})</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Now, once a user presses this button, the login process will start and they’ll be asked to log in with their E-mail id.</p> <p>You can use any scheme name, here I used <code class="language-plaintext highlighter-rouge">demo</code>. But I recommend not to use <code class="language-plaintext highlighter-rouge">https</code> because it might conflict with the intent-filters internally. I got this error while building <a href="https://genicsblog.com/introducing-jekyllex-android-app" target="_blank">JekyllEx</a>.</p> <p>Once the login is successful, we can get the access token which can be used to retrieve the user profile. Let’s make a function to get the user profile from the token:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="k">fun</span> <span class="nf">showUserProfile</span><span class="p">(</span><span class="n">accessToken</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">client</span> <span class="p">=</span> <span class="nc">AuthenticationAPIClient</span><span class="p">(</span><span class="n">account</span><span class="p">)</span>

    <span class="c1">// With the access token, call `userInfo` and get the profile from Auth0.</span>
    <span class="n">client</span><span class="p">.</span><span class="nf">userInfo</span><span class="p">(</span><span class="n">accessToken</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="kd">object</span> <span class="err">: </span><span class="nc">Callback</span><span class="p">&lt;</span><span class="nc">UserProfile</span><span class="p">,</span> <span class="nc">AuthenticationException</span><span class="p">&gt;</span> <span class="p">{</span>
            <span class="k">override</span> <span class="k">fun</span> <span class="nf">onFailure</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="nc">AuthenticationException</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// Something went wrong!</span>
                <span class="nc">Toast</span><span class="p">.</span><span class="nf">makeText</span><span class="p">(</span>
                    <span class="k">this</span><span class="nd">@MainActivity</span><span class="p">,</span>
                    <span class="s">"Error getting profile \n${error.message}"</span><span class="p">,</span>
                    <span class="nc">Toast</span><span class="p">.</span><span class="nc">LENGTH_LONG</span>
                <span class="p">).</span><span class="nf">show</span><span class="p">()</span>
            <span class="p">}</span>

            <span class="k">override</span> <span class="k">fun</span> <span class="nf">onSuccess</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="nc">UserProfile</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// We have the user's profile!</span>
                <span class="n">binding</span><span class="p">.</span><span class="n">nameTv</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">result</span><span class="p">.</span><span class="n">name</span>
                <span class="n">binding</span><span class="p">.</span><span class="n">emailTv</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">result</span><span class="p">.</span><span class="n">email</span>
                <span class="nc">Toast</span><span class="p">.</span><span class="nf">makeText</span><span class="p">(</span>
                    <span class="k">this</span><span class="nd">@MainActivity</span><span class="p">,</span>
                    <span class="s">"Login Successful!"</span><span class="p">,</span>
                    <span class="nc">Toast</span><span class="p">.</span><span class="nc">LENGTH_SHORT</span>
                <span class="p">).</span><span class="nf">show</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">})</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="add-log-out">Add Log-out</h3> <p>Now, let’s make a function that enables logging out.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="k">fun</span> <span class="nf">logout</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">WebAuthProvider</span><span class="p">.</span><span class="nf">logout</span><span class="p">(</span><span class="n">account</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">withScheme</span><span class="p">(</span><span class="s">"demo"</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">start</span><span class="p">(</span>
            <span class="k">this</span><span class="p">,</span>
            <span class="kd">object</span> <span class="err">: </span><span class="nc">Callback</span><span class="p">&lt;</span><span class="nc">Void</span><span class="p">?,</span> <span class="nc">AuthenticationException</span><span class="p">&gt;</span> <span class="p">{</span>
                <span class="k">override</span> <span class="k">fun</span> <span class="nf">onSuccess</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="nc">Void</span><span class="p">?)</span> <span class="p">{</span>
                    <span class="c1">// The user has been logged out!</span>
                    <span class="nc">Toast</span><span class="p">.</span><span class="nf">makeText</span><span class="p">(</span>
                        <span class="k">this</span><span class="nd">@MainActivity</span><span class="p">,</span>
                        <span class="s">"Successfully logged out!"</span><span class="p">,</span>
                        <span class="nc">Toast</span><span class="p">.</span><span class="nc">LENGTH_SHORT</span>
                    <span class="p">).</span><span class="nf">show</span><span class="p">()</span>
                    <span class="n">binding</span><span class="p">.</span><span class="n">nameTv</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">resources</span><span class="p">.</span><span class="nf">getString</span><span class="p">(</span><span class="nc">R</span><span class="p">.</span><span class="n">string</span><span class="p">.</span><span class="n">john_doe</span><span class="p">)</span>
                    <span class="n">binding</span><span class="p">.</span><span class="n">emailTv</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">resources</span><span class="p">.</span><span class="nf">getString</span><span class="p">(</span><span class="nc">R</span><span class="p">.</span><span class="n">string</span><span class="p">.</span><span class="n">email</span><span class="p">)</span>
                <span class="p">}</span>

                <span class="k">override</span> <span class="k">fun</span> <span class="nf">onFailure</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="nc">AuthenticationException</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nc">Toast</span><span class="p">.</span><span class="nf">makeText</span><span class="p">(</span>
                        <span class="k">this</span><span class="nd">@MainActivity</span><span class="p">,</span>
                        <span class="s">"Couldn't Logout!"</span><span class="p">,</span>
                        <span class="nc">Toast</span><span class="p">.</span><span class="nc">LENGTH_SHORT</span>
                    <span class="p">).</span><span class="nf">show</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div> <p>Now, our app is ready to handle log-in and logout. You can also <a href="https://github.com/gouravkhunger/auth0-demo-android/blob/main/app/src/main/java/com/github/gouravkhunger/auth0demo/MainActivity.kt" rel="nofollow noopener noreferrer" target="_blank">checkout the content</a> of the <code class="language-plaintext highlighter-rouge">MainActivity.kt</code> file on the repo.</p> <h1 id="setting-up-auth0">Setting up Auth0</h1> <h2 id="make-an-account">Make an account</h2> <p>First, let’s do the setup needed at the auth0 dashboard.</p> <p>Go to the official <a href="https://auth0.com/" rel="nofollow noopener noreferrer" target="_blank">Auth0</a> site and press signup on the navigation bar. After making an account, you would be taken to the dashboard where you can create a tenant. Here, the tenant is what auth0 calls a project. A project can have a number of applications in it.</p> <p><em>All the applications in a single-tenant have the same user database and storage.</em></p> <h2 id="set-up-the-tenant">Set up the tenant</h2> <p>Create a new tenant. You can choose any domain name for your tenant, here I am choosing <code class="language-plaintext highlighter-rouge">auth0-demo-android</code>. For now, this will be a subdomain, but you can customize it to your custom domain by upgrading your free plan.</p> <p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632595285718/pzRUUPZSOX.png" alt="Creating a new tenant in Auth0 dashboard" loading="lazy"></p> <h2 id="create-a-new-app">Create a new app</h2> <p>Go to the applications section and press create a new app. Since we are building an Android app, choose the native field and hit create.</p> <p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632595589796/u_K9yatlS.png" alt="Creating a new app in auth0 dashboard" loading="lazy"></p> <p>Since we are going to develop an app that will use this tenant, tag it in the <code class="language-plaintext highlighter-rouge">development</code> phase.</p> <p>After creating your app, go to the app settings</p> <p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632648478901/D6LpFj98V.png" alt="Settings tab of an app in Auth0" loading="lazy"></p> <p>Scroll down to the Application URIs section, there add callback URLs for login and logout. These are required to let Auth0 know what apps are authorized to perform these actions as these strings contain identifiers for our app.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>demo://&lt;tenant-domain&gt;.us.auth0.com/android/PACKAGE_NAME/callback
</code></pre></div></div> <p><em>Replace the package name and tenant domain with that of your own app. If you have set a scheme other than <code class="language-plaintext highlighter-rouge">demo</code>, change it here.</em></p> <p>Here’s an example:</p> <p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632648617407/DJhXTcFJH.png" alt="Auth0 allowed callbacks urls" loading="lazy"></p> <p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1632648626448/y2zKRWq53.png" alt="Auth0 allowed login urls" loading="lazy"></p> <p>After adding them, scroll all the way to the bottom and save the changes.</p> <p>Now you can go ahead and replace the Client IDs and such things in the code, wherever necessary.</p> <h1 id="congratulations-">Congratulations 🥳</h1> <p>You have successfully added Auth0 to your Android app. Trust me, though this post was long, it is actually really easy if you try it on your own.</p> <p>If you stayed along till this far, I am really thankful to you! Please comment on your experience with Auth0 and this article.</p> <p><a href="/contributor/gouravkhunger">Let’s connect</a> with each other :)</p> </article> <hr> <div class="px-6 pb-6 md:px-8 md:pb-8 flex flex-col items-center rounded-bl-2xl rounded-br-2xl"> <p class="text-center mb-4">Did you learn something new?<br>Comment it down and spread the word!</p> <div class="grid grid-flow-col gap-6"> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://facebook.com/sharer.php?u=Check%20out%20this%20amazing%20article%20at%20Genics%20Blog%20'Integrate%20Authentication%20to%20your%20Android%20App%20with%20Auth0':%20https://genicsblog.com/authentication-in-android-app-with-auth0" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/facebook.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://api.whatsapp.com/send?text=Checkout%20this%20amazing%20article%20at%20Genics%20Blog%20'Integrate%20Authentication%20to%20your%20Android%20App%20with%20Auth0':%20https://genicsblog.com/authentication-in-android-app-with-auth0" onclick="window.open(this.href, 'whatsapp-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/whatsapp.svg" class="social-image w-10 h-10" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://genicsblog.com/authentication-in-android-app-with-auth0" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/linkedin.svg" class="social-image w-7 h-7" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://twitter.com/intent/tweet?text=Check%20out%20this%20amazing%20article%20by%20@gourav_khunger%20at%20@genicsblog:%20Integrate%20Authentication%20to%20your%20Android%20App%20with%20Auth0&amp;url=https://genicsblog.com/authentication-in-android-app-with-auth0" onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/twitter.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://www.snapchat.com/scan?attachmentUrl=https://genicsblog.com/authentication-in-android-app-with-auth0" onclick="window.open(this.href, 'snapchat-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/snapchat.svg" class="social-image w-14 h-14 -m-2" loading="lazy"> </a> </div> </div> </div> <aside class="m-6 md:m-10 lg:my-14 lg:mr-10 lg:-ml-4 md:mr-8 lg:max-w-[25%] xl:max-w-[20%]"> <figure class="bg-white rounded-2xl p-6 md:p-8 shadow-xl shadow-slate-200"> <img class="w-24 h-24 rounded-full mx-auto" src="https://avatars.githubusercontent.com/u/46792249" alt="" loading="lazy"> <div class="pt-4 space-y-4"> <figcaption class="font-medium text-center"> <div> <a href="/contributor/gouravkhunger" class="text-xl font-bold"> Gourav Khunger </a> </div> <div class="text-gray-700 text-sm"> Founder @ Genics Blog </div> </figcaption> <p class="leading-5 font-medium text-justify"> 16 year old passionate App developer. I have interests in web development too. </p> </div> </figure> <figure class="bg-white rounded-2xl p-6 md:p-8 shadow-xl shadow-slate-200 lg:sticky lg:top-24 mt-8"> <ins class="adsbygoogle" style="display:block" data-ad-format="auto" data-full-width-responsive="true" data-ad-client="ca-pub-8114751086331659" data-ad-slot="8698895132"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </figure> </aside> </section> <br> <div align="center"> <ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-8114751086331659" data-ad-slot="3535897708"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <br> <h1 class="mx-8 md:mx-10 lg:mx-14 -mb-4 lg:-mb-8">Comments</h1> <section class="block lg:flex"> <div class="md:text-lg m-6 md:m-10 lg:m-14 lg:w-full lg:max-w-[65%] xl:max-w-[70%]"> <div class="comments"> <p class="md:text-lg p-6 md:p-8 text-center">No comments here, start the discussion below!</p> </div> <div id="respond"> <div class="bg-white rounded-2xl shadow-xl shadow-slate-200 p-8 mt-2 mb-12" id="form-parent"> <h5 id="form-title">Add a comment</h5> <form class="form" method="POST" action="https://comments.genicsblog.com/v2/entry/genicsblog/genicsblog.github.io/main/comment"> <input name="options[slug]" type="hidden" value="authentication-in-android-app-with-auth0"> <input type="hidden" id="replying-to-id" name="fields[replying_to_id]" value=""> <div> <label for="commentbox-name">Name</label><br> <input name="fields[name]" type="text" id="commentbox-name" placeholder="John Doe" required class="mt-1 w-full rounded-lg px-2 py-1.5 border-2 focus:border-primary outline-none"> </div> <div class="mt-4"> <label for="commentbox-message">Message</label><br> <textarea type="text" name="fields[message]" id="commentbox-message" rows="5" placeholder="Enter your message here. Markdown is supported!" required class="mt-1 w-full rounded-lg px-2 py-1.5 border-2 focus:border-primary outline-none form-control"></textarea> </div> <div> <button class="submit-form px-2.5 py-0.5 mt-4 rounded-md bg-black text-white hover:shadow-lg hover:scale-110 transition"> Submit </button> <button class="hidden ml-2 px-2.5 py-0.5 mt-4 rounded-md bg-black text-white hover:shadow-lg hover:scale-110 transition" id="cancel-reply-btn"> Cancel Reply </button> </div> </form> </div> </div> <script src="/assets/js/comment.js"></script> </div> <aside class="m-8 md:m-10 lg:my-14 lg:mr-10 lg:-ml-4 md:mr-8 lg:max-w-[25%] xl:max-w-[20%]"> <div class="p-6 md:p-8 space-y-4 lg:sticky lg:top-24 rounded-2xl bg-white shadow-xl shadow-slate-200"> <p class="leading-5 font-medium text-justify"> Please adhere to our <a href="/code-of-conduct">Code of Conduct</a> while adding a comment. Respect other's opinion. <br><br> Comments are be moderated before being published. </p> </div> </aside> </section> <br> <div align="center"> <ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-8114751086331659" data-ad-slot="3535897708"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <br> </main> <footer class="px-12 py-8 text-center"> © 2021 <a href="/">Genics Blog</a> <br> Built with <a href="https://jekyllrb.com" target="_blank" rel="nofollow noopener noreferrer">Jekyll</a>. Hosted on <a href="https://github.com" target="_blank" rel="nofollow noopener noreferrer">GitHub</a>. <br><br> Developed by <a href="https://github.com/gouravkhunger" rel="nofollow noopener noreferrer" target="_blank"> Gourav Khunger </a>. Thanks to the <a href="https://github.com/genicsblog/genicsblog.github.io/graphs/contributors" rel="nofollow noopener noreferrer" target="_blank">contributors</a>! <br><br> <a class="nav-item text-white" href="/terms">T&amp;C</a> <a class="nav-item text-white" href="/privacy-policy">Privacy Policy</a> </footer> <div class="hidden fixed top-0 w-full h-full p-6 md:p-14 backdrop-blur-md cursor-pointer z-20" id="search-container"> <div class="p-4 bg-white mx-auto w-full max-h-full sm:w-3/4 lg:w-1/2 content-center rounded-lg shadow-md shadow-slate-200 cursor-auto overflow-auto" id="search-box"> <div class="flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-slate-400" fill="none" viewbox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> <input type="text" class="w-full h-full pl-4 text-2xl outline-none" id="search-input" placeholder="Search..."> </div> <div id="results-container"> </div> </div> </div> <div class="hidden fixed top-0 left-0 flex justify-center items-center w-full h-full backdrop-blur-md shadow-md z-20" id="modal"> <div class="p-4 bg-white w-5/6 sm:w-3/4 lg:w-1/2 content-center rounded-lg shadow-lg shadow-slate-200 cursor-auto"> <div class="flex justify-between"> <span class="text-xl md:text-2xl" id="modal-title">Comment submitted!</span> <button id="close" aria-label="Close modal"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 sm:h-8 sm:w-8" fill="none" viewbox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path> </svg> </button> </div> <p class="mt-6" id="modal-message"></p> </div> </div> <script src="/assets/js/theme.js"></script> <script src="/assets/js/search.js"></script> <script src="/assets/js/prism.js"></script> </body> </html>